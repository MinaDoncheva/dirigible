<!DOCTYPE HTML>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" ng-app="cruddialog" ng-controller="CRUDDialogController">

    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="icon" sizes="any" href="data:;base64,iVBORw0KGgo=">
        <title dg-view-title></title>
        <script type="text/javascript" src="../services/crud-dialog.js"></script>
        <script type="text/javascript" src="/services/js/resources-core/services/loader.js?id=ide-view-js"></script>
        <link type="text/css" rel="stylesheet" href="/services/js/resources-core/services/loader.js?id=ide-view-css" />
        <theme></theme>
        <script type="text/javascript" src="crud-dialog.js"></script>
    </head>

    <body class="dg-vbox">
        <fd-busy-indicator-extended class="dg-fill-parent" ng-hide="state.error || !state.isBusy" dg-size="l">
            {{state.busyText}}
        </fd-busy-indicator-extended>
        <div class="fd-padding dg-fill-parent" fd-scrollbar ng-show="!state.error && !state.isBusy">
            <fd-fieldset ng-form="forms.dbForm">
                <div class="dialog-overlay" ng-show="state.isDialogOpen">
                    <div class="dialog">
                        <h3 ng-if="type === 'edit'">Edit Row</h3>
                        <h3 ng-if="type === 'delete'">Delete Row</h3>
                        <h3 ng-if="type === 'create'">Add New Row</h3>

                        <form ng-if="type === 'edit' || type === 'create'">
                            <div ng-repeat="(key, value) in (type === 'edit' ? data.selectedRow : data.newRow)">
                                <fd-form-group>
                                    <fd-form-item>
                                        <fd-form-label for="{{key}}" dg-colon="true" dg-required="true">{{key}}
                                        </fd-form-label>
                                        <fd-input id="{{key}}" name="{{key}}" type="text" placeholder="Enter a {{key}}"
                                            ng-model="type === 'edit' ? data.selectedRow[key] : data.newRow[key]"
                                            ng-required="true" ng-trim="false"></fd-input>
                                    </fd-form-item>
                                </fd-form-group>
                            </div>
                        </form>

                        <div ng-if="type === 'delete'">
                            <p>Are you sure you want to delete this row?</p>
                            <p><strong>{{data.selectedRow | json}}</strong></p>
                        </div>

                        <fd-bar bar-design="footer">
                            <fd-bar-right>
                                <fd-bar-element>
                                    <fd-button dg-label="{{type | uppercase}}" ng-click="confirmAction()"
                                        dg-type="{{type === 'delete' ? 'negative' : 'emphasized'}}" compact="true">
                                    </fd-button>
                                </fd-bar-element>
                                <fd-bar-element>
                                    <fd-button dg-label="Cancel" ng-click="closeDialog()" dg-type="transparent"
                                        compact="true">
                                    </fd-button>
                                </fd-bar-element>
                            </fd-bar-right>
                        </fd-bar>
                    </div>
                </div>
            </fd-fieldset>
        </div>
    </body>

</html>
